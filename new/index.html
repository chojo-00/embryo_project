<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Embryo Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="dashboard">
        <!-- μ™Όμ½ ν¨λ„ -->
        <div class="left-panel">
            <div class="upload-section">
                <h3>π§¬ Embryo Upload</h3>
                <input type="file" id="image-upload" accept="image/png">
                <button onclick="handleImageUpload()">μ—…λ΅λ“</button>
                <button onclick="runModel()">λ¨λΈ μ‹¤ν–‰</button>
                <!-- μ΄κΈ°ν™” λ²„νΌ -->
                <button onclick="resetServer()" class="upload-btn">μ΄κΈ°ν™”</button>
                <div class="image-preview-row">
                    <div class="preview-card">
                        <img id="original-image" class="preview-image">
                    </div>
                    <div class="preview-card">
                        <img id="mask-image" class="preview-image">
                    </div>
                    <div class="preview-card">
                        <img id="overlay-image" class="preview-image">
                    </div>
                </div>

                <div class="embryo-info">
                    <p><strong>Cell:</strong> <span id="preg-score"></span></p>
                    <p><strong>Evenness:</strong> <span id="grade"></span></p>
                    <p><strong>Fragmentation:</strong> <span id="circularity"></span></p>
                </div>
            </div>

            <!-- λ°°μ•„ μμ„ μ„Ήμ…μ„ Embryo Upload μ•„λλ΅ μ΄λ™ -->
            <div class="ranking-section">
                <h3>π† λ°°μ•„ μμ„</h3>
                <div id="ranking-box"></div>
            </div>

            <div class="upload-pdf-section">
                <h3>π“„ PDF μ—…λ΅λ“</h3>
                <form id="upload-form">
                    <input type="file" name="file" accept=".pdf">
                    <button type="submit">μ—…λ΅λ“</button>
                </form>
            </div>
        </div>

        <!-- μ¤λ¥Έμ½ ν¨λ„ -->
        <div class="right-panel">
            <div class="simulation-section">
                <h3>π§ μ‹λ®¬λ μ΄μ…</h3>

                <div class="analysis-toggle">
                    <button class="analysis-btn" onclick="showAnalysis('fragment')">ννΈν™”</button>
                    <button class="analysis-btn" onclick="showAnalysis('roundness')">μ›ν•λ„</button>
                </div>

                <div class="analysis-box">
                    <!-- ννΈν™” -->
                    <div id="fragment-section" class="analysis-content" style="display: none;">
                        <div class="roundness-container">
                        <div class="roundness-buttons">
                            <button class="sim-btn active" onclick="showFragmentImage(1, this)">1</button>
                            <button class="sim-btn" onclick="showFragmentImage(2, this)">2</button>
                            <button class="sim-btn" onclick="showFragmentImage(3, this)">3</button>
                            <button class="sim-btn" onclick="showFragmentImage(4, this)">4</button>
                        </div>
                        <div class="roundness-image-box">
                            <img id="sim-img" src="/static/f1.png" class="roundness-image">
                        </div>
                        <p id="fragment-description" class="description-text" style="display: none;"></p>
                    </div>
                </div>

                    <!-- μ›ν•λ„ -->
                    <div id="roundness-section" class="analysis-content" style="display: none;">
                        <div class="roundness-container">
                            <div class="roundness-buttons">
                                <button class="sim-btn active" onclick="showRoundnessImage(1, this)">1</button>
                                <button class="sim-btn" onclick="showRoundnessImage(2, this)">2</button>
                                <button class="sim-btn" onclick="showRoundnessImage(3, this)">3</button>
                                <button class="sim-btn" onclick="showRoundnessImage(4, this)">4</button>
                            </div>
                            <div class="roundness-image-box">
                                <img id="roundness-display" src="static/r1.png" class="roundness-image">
                            </div>
                            <p id="roundness-description" class="description-text" style="display: none;"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chatbot-section">
                <h3>π¤– AI μ±—λ΄‡</h3>
                <div class="chat-window" id="chat-window"></div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="μ§λ¬Έμ„ μ…λ ¥ν•μ„Έμ”">
                    <button onclick="sendMessage()">μ „μ†΅</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>